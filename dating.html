<!DOCTYPE html>
<html lang="nb">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dating</title>
    <link rel="stylesheet" href="./dating-style.css">
</head>

<body>
    <header>
        <nav>
            <a href="./dating.html">
                <div class="nav-div dating">
                    <p>DATING</p>
                </div>
            </a>
            <a href="./dogcare.html">
                <div class="nav-div dog-care">
                    <p>DOG CARE</p>
                </div>
            </a>
        </nav>
    </header>

    <!-- Containeren for hele siden-->
    <div class="main-container">

        <!-- Container for kjønns(?) knappene, gjerne finne ett anna navn enn sex for kjønn hahaha-->
        <div class="sex-container">
            <div class="side-buttons">
                <button id="kvinner-btn">Kvinner</button>
                <button id="menn-btn">Menn</button>
                <button id="begge-btn">Begge kjønn</button>
            </div>


            <!-- Container for dating kortet i midten-->
            <div class="dating-card">
                <img src="placeholder.jpg" alt="Dating Bilde">
                <p id="navn">Navn</p>
                <p id="bosted">Bosted</p>
            </div>

            <!-- Container for matchede kort skal i teorien legge seg her-->
            <div class="matched-cards">
                <div class="image-grid">
                   
                    <!--Her må det legges til flere bilder etter vi har koblet til API-->
                </div>
            </div>

        </div>

        <script>
            // score og liked profiles
            let score = 10; 
            let likerProfiles = [];
           
            //Funksjon som oppdaterer visning av scoret
            function updateSoreDisplay() {
                const scoreDisplay = document.getElementById('score');
                scoreDisplay.textContent = score; 
            }

    //Funksjon for å hente og vise tilfeldig profil
async function fetchRandomProfile() {
    const genderParam = gender ? `&gender=${gender}` : '';
    fetch("https://randomuser.me/api/")
    .then(response => respons.json())
    .then(data => {
        const profile = data.results[0];
        displayProfile(profile);

    })
    .catch(error => console.error('Error fetching random profile:', error));
}
//Funksjon for å vise profilen i kortet
function display(profile) {
    const profileCard = document.querySelector('.dating-card');
    profileCard.querySelector('img').src = profile.picture.large;
    profileCard.querySelector('#navn').textContent =  `${profile.name.first} ${profile.name.last}`;
    profileCard.querySelector('#bosted').textcontent = `${profile.location.city}, ${profile.location.Country}`;

}

//Funksjon for å bytte ut kortet med en ny profil
function swipeleft() {
    fetchRandomProfile();
}

//Funksjon for å legge til profilen i likte profiler
function swipeRight(profile) {
    likedProfiles.push(profile);
    localStorage.setItem('likesProfiles', JSON.stringify(likedProfiles));
    score--;
    updateScoreDisplay();

    //Hvis brukeren har nådd maksimalt antall likte profiler
    if (likedProfiles.lenght > 10) {
        alert('Du har likt for mange profiler.Vennligst slett noen profiler fra oversikten.');

    }
    //Hent og vis tilfeldig profil
    fetchRandomProfile();
    
}
// Funksjon for å vise likte profiler
function renderLikedProfiles() {
    const likedProfilesList = document.getElementById('liked-profiles-list');
    likedProfilesList.innerHTML = ''; //tøm listen før oppdatering
    likedProfiles.forEach(profile => {
        const li = document.createElement('li');
        li.textContent = `${profile.name.first} ${profile.name.last}`;
        //sletteknapp
        const deleteButton = document.createElement('button');
        deleteButton.addEventListener('click', () => deleteProfile(profile));
        li.appendChild(deleteButton);
        likedProfilesList.appendChild(li);

    });


}

//Slette profil fra likte profiler
function deleteProfile(profile) {
    const index = likesProfiles.indexOf(profile);
    if (index !== -1) {
        likedProfiles.splice(index, 1);
        localStorage.setItem('likedProfiles', JSON,stringify(likedProfiles));
        renderLikedProfiles();
        
    }
}

        </script>
</body>

</html>